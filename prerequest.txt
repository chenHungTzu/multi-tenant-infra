1.建立tf backend for lock 
aws dynamodb create-table --table-name tflock \
    --attribute-definitions AttributeName=LockID,AttributeType=S \
    --key-schema AttributeName=LockID,KeyType=HASH \
    --region ap-northeast-1 \
    --billing-mode PAY_PER_REQUEST

2.建立tf backend tf.state
aws s3api create-bucket --bucket tflock-multiple-tenant \
    --region ap-northeast-1 \
    --create-bucket-configuration LocationConstraint=ap-northeast-1 


3.執行第一次
terraform destroy --auto-approve


4.推送至codecommit
git push https://git-codecommit.ap-northeast-1.amazonaws.com/v1/repos/tf-codecommit


5.等待codepipeline 執行完畢.

6.呼叫api gateway 建立tenant
https://<id>.execute-api.ap-northeast-1.amazonaws.com/dev/admin/tenant-quota
{
    "TenantId" : "TenantId",
    "QuotaOffeset" : 0,
    "QuotaLimit" : 300,
    "QuotaPeriod" : "DAY",
    "BurstLimit" : 2,
    "RateLimit": 1
}

7.重新觸發codepipeline.